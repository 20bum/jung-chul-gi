# 5장. 서버 프로그램 구현



## 개발 환경 구축

응용 소프트웨어 개발을 위해 개발 프로젝트를 이해하고 소프트웨어 및 하드웨어 장비를 구축하는 것을 의미한다.



#### 하드웨어 환경

사용자와의 인터페이스 역할을 하는 클라이언트 그리고 클라이언트와 통신하여 서비스를 제공하는 서버로 구성된다.

* 클라이언트에는 PC, 스마트폰 등이 있다.

* 서버는 사용목적에 따라 웹서버, 웹 애플리케이션 서버, 데이터베이스 서버, 파일 서버 등으로 나뉜다.

  + 웹 서버 (Web Server)

    >  클라이언트로부터 직접 요청을 받아 처리하는 서버로, 저용량의 정적 파일들을 제공한다.

  + 웹 애플리케이션 서버(WAS; Web Application Server) 

    > 동적 서브스를 제공하기 위해 웹 서버로부터 요청을 받아 데이터 가공 작업을 수행하거나, 웹 서버와 데이터베이스 서버 또는 웹서버와 파일 서버 사이에서 인터페이스 역할을 수행하는 서버

  + 데이터베이스 서버 (DB Server)

    > 데이터베이스와 이를 관리하는 DBMS를 운영하는 서버

  + 파일 서버 (File Server)

    > 데이터베이스에 저장하기에는 비효율적이거나, 서비스 제공을 목적으로 유지하는 파일들을 저장하는 서버

> **웹 서버의 기능**
>
> + HTTP/HTTPS 지원 : 브라우저로부터 요청을 받아 응답할 떄 사용되는 프로토콜
> + 통신 기록 : 처리한 요청들을 로그 파일로 기록하는 기능
> + 정적 파일 관리 : HTML, CSS, 이미지 등의 정적 파일들을 저장하고 관리하는 기능
> + 대역폭 제한 : 네트워크 트래픽의 포화를 방지하기 위해 응답 속도를 제한하는 기능
> + 가상 호스팅 : 하나의 서버로 여러 개의 도메인 이름을 연결하는 기능
> + 인증 : 사용자가 합법적인 사용자인지를 확인하는 기능



#### 소프트웨어 환경

클라이언트와 서버 운영을 위한 시스템 소프트웨어와 개발에 사용되는 개발 소프트웨어로 구성된다.

* 시스템 소프트웨어에는 요구사항 관리도구, 설계/모델링 도구, 구현 도구, 빌드도구, 테스트도구, 형상관리 도구 등이 있다.

> **개발 언어의 선정 기준**
>
> + 적정성 : 개발하려는 소프트웨어의 목적에 적합해야 한다.
> + 효율성 : 코드의 작성 및 구현이 효율적이어야 한다.
> + 이식성 : 다양한 시스템 및 환경에 적용이 가능해야 한다.
> + 친밀성 : 개발 언어에 대한 개발자들의 이해도와 활용도가 높아야 한다.
> + 범용성 : 다른 개발 사례가 존재하고 여러 분야에서 활용되고 있어야 한다.





## 모듈

모듈화를 통해 분리된 시스템의 각 기능들로, 서브루틴, 서브시스템, 소프트웨어 내의 프로그램, 작업 단위 등과 같은 의미로 사용된다.

* 단독으로 컴파일이 가능하며, 재사용 할 수 있다.
* 모듈의 기능적 독립성은 소프트웨어를 구성하는 각 모듈의 기능이 서로 독립됨을 의미하는것으로, 모듈이 하나의 기능만을 수행하고 다른 모듈과의 과도한 상호작용을 배제함으로써 이루어진다.
* 독립성을 높이려면 모듈의 결합도는 약하게, 응집도는 강하게, 모듈의 크기는 작게 만들어야 한다.



#### 결합도 (Coupling)

모듈 간에 상호 의존하는 정도 또는 두 모듈 사이의 연관 관계를 의미

* 결합도가 약할수록 품질이 높고, 강할수록 품질이 낮다.

  <img src="D:\GIT\EIP\실기\img\Coupling.png" alt="Coupling" style="zoom:40%;" />

  + 자료 결합도 (Data Coupling)

    > - 모듈간의 인터페이스가 자료 오소로만 구성될 때의 결합도.
    > - 다른 모듈을 호출하면서 매개변수나 인수로 데이터를 넘겨주고, 호출 받은 모듈은 받은 데이터에 대한 처리결과를 다시 돌려주는 방식

  + 스탬프(검인) 결합도 (Stamp Coupling)

    > - 모듈간의 인터페이스로 배열이나 레코드 등의 자료 구조가 전달될 떄의 결합도.
    > - 두 모듈이 동일한 자료 구조를 조회하는 경우의 결합도

  + 제어 결합도 (Control Coupling)

    > - 어떤 모듈이 다른 모듈 내부의 논리적인 흐름을 제어하기 위해 제어 신호를 이용하여 통신하거나 제어요소 (Function Code, Switch, Tag, Flag)를 전달하는 결합도

  + 외부 결합도 (External Coupling)

    > - 어떤 모듈에서 선언한 데이터(변수)를 외부의 다른 모듈에서 참조할 때의 결합도

  + 공통(공유) 결합도 (Common Coupling)

    > - 공유되는 공통 데이터 영역을 여러 모듈이 사용할 때의 결합도

  + 내용 결합도 (Content Coupling)

    > - 한모듈이 다른 모듈의 내부 기능 및 그 내부 자료를 직접 참조하거나 수정할 떄의 결합도.



#### 응집도 (Cohesion)

정보은닉 개념을 확장한 것으로, 명령어나 호출문 등 모듈의 내부 요소들의 서로 관련되어 있는 정도, 즉 모듈이 독립적인 기능으로 정의되어 있는 정도를 의미한다.

* 응집도가 강할수록 품질이 높고, 약할수록 품질이 낮다.

  ![Cohesion](D:\GIT\EIP\실기\img\Cohesion.png)

  + 기능적 응집도 (Functional Cohesion)

    > 모듈 내부의 모든 기능 요소들이 단일 문제와 연관되어 수행될 경우의 응집도

  + 순차적 응집도 (Sequential Cohesion)

    > 모듈 내 하나의 활동으로부터 나온 출력 데이터를 그 다음 활동의 입력 데이터로 사용할 경우의 응집도

  + 교환(통신)적 응집도 (Communication Cohesion)

    > 동일한 입력과 출력을 사용하여 서로 다른 기능을 수행하는 구성 요소들이 모였을 경우의 응집도

  + 절차적 응집도 (Procedural Cohesion)

    > 모듈이 다수의 관련 기능을 가질 때 모듈 안의 구성 요소들이 그 기능을 순차적으로 수행할 경우의 응집도

  + 시간적 응집도 (Temporal Cohesion)

    > 특정 시간에 처리되는 몇 개의 기능을 모아 하나의 모듈로 작성할 경우의 응집도

  + 논리적 응집도 (Logical Cohesion)

    > 유사한 성격을 갖거나 특정 형태로 분류되는 처리 요소들로 하나의 모듈이 형성되는 경우의 응집도

  + 우연적 응집도 (Coincidental Cohesion)

    > 모듈 내부의 각 구성 요소들이 서로 관련 없는 요소로만 구성된 경우의 응집도



#### 팬인(Fan-In) / 팬아웃(Fan-Out)

* 팬인은 어떤 모듈을 제어(호출)하는 모듈의 수를 나타낸다
* 팬아웃은 어떤 모듈에 의해 제어(호출)되는 모듈의 수를 나타낸다.





## 공통 모듈

여러 프로그램에서 공통적으로 사용할 수 있는 모듈을 의미

* 정확성 (Correctness)

  > 시스템 구현시 해당 기능이 필요하다는 것을 알 수 있도록 정확히 작성한다.

* 명확성 (Clarity)

  > 해당 기능을 이해할 때 중의적으로 해석되지 않도록 명확하게 작성한다.

* 완전성 (Completeness)

  > 시스템 구현을 위해 필요한 모든 것을 기술한다.

* 일관성 (Consistency)

  > 공통 기능들 간 상호 충돌이 발생하지 않도록 작성한다.

* 추적성 (Traceability)

  > 기능에 대한 요구사항의 출처, 관련 시스템 등의 관계를 파악할 수 있도록 작성한다.



#### 재사용 (Reuse)

비용과 개발 시간을 절약하기 위해 이미 개발된 기능들을 파악하고 재구성하여 새로운 시스템 또는 기능 개발에 사용하기 적합하도록 최적화 시키는 작업

* 재사용 규모에 따른 분류

  > + 함수와 객체 : 클래스나 메소드 단위의 소스코드를 재사용한다.
  > + 컴포넌트 : 컴포넌트 자체에 대한 수정 없이 인터페이스를 통해 통신하는 방식으로 재사용
  > + 애플리케이션 : 공통기능들을 제공하는 애플리케이션을 공유하는 방식으로 재사용



#### 효과적인 모듈 설계 방안

* 결합도는 줄이고 응집도는 높여서 모듈의 독립성과 재사용성을 높인다.
* 복잡도와 중복성을 줄이고 일관성을 유지시킨다.
* 유지보수가 용이해야 한다.
* 모듈의 기능은 예측이 가능해야 하며 지나치게 제한적이어서는 안된다.





## DBMS 접속 (Connection)

사용자가 데이터를 사용하기 위해 응용 시스템을 이용하여 DBMS에 접근하는 것을 의미한다.



#### DBMS 접속 기술

API 또는 API의 사용을 편리하게 도와주는 프레임워크 등을 의미한다.

> **API (Application Programming Interface)**
>
> 운영체제나 DBMS 등을 이용할 수 있도록 규칙 등에 대해 정의해 놓은 인터페이스를 의미

> **프레임워크(Framework)**
>
> 특정 기능을 수행하기 위해 필요한 클래스나 인터페이스 등을 모아둔 집합체



* JDBC (Java DataBase Connectivity)

  Java 언어로 다양한 종류의 데이터베이스에 접속하고 SQL문을 수행 할 때 사용되는 표준 API

* ODBC (Open DataBase Connectivity)

  데이터베이스에 접근하기 위한 표준 개방형 API로, 개발언어에 관계 없이 사용할 수 있다.

* MyBatis

  JDBC코드를 단순화하여 사용할 수 있는 SQL Mapping 기반 오픈 소스 접속 프레임워크



#### 동적 SQL (Dynamic SQL)

다양한 조건에 따라 SQL 구문을 동적으로 변경하여 처리할 수 있는 SQL 처리 방식

* 동적 SQL 은 SQL문을 문자열 변수에 넣어 처리한다.
* 사용자로부터 SQL문의 일부 또는 전부를 입력받아 실행할 수 있다.
* 동적 SQL은 정적 SQL에 비해 속도가 느리지만, 상황에 따라 다양한 조건을 첨가하는 등 유연한 개발이 가능하다.





## 서버 개발

웹 애플리케이션의 로직을 구현할 서버 프로그램을 제작하여 웹 애플리케이션 서버에 탑재하는 것을 의미



#### 서버 개발 프레임워크

서버 프로그램 개발 시 다양한 네트워크 설정, 요청 및 응답 처리, 아키텍처 모델 구현 등을 손쉽게 처리할 수 있도록 클래스나 인터페이스를 제공하는 소프트웨어를 의미한다.



#### 프레임워크의 특성

* 모듈화 (Modularity)

  > 프레임워크는 캡슐화를 통해 모듈화를 강화하고 설계 및 구현의 변경에 따른 영향을 최소화함으로서 소프트웨어의 품질을 향상시킨다.

* 재사용성 (Reusability)

  > 프레임워크는 재사용 가능한 모듈들을 제공함으로써 개발자의 생상성을 향상시킨다.

* 확장성 (Extensibility)

  > 다형성을 통한 인터페이스 확장이 가능하여 다양한 형태와 기능을 가진 애플리케이션 개발이 가능하다.

* 제어의 역흐름 (Inversion of Control)

  > 개발자가 관리하고 통제해야 하는 객체들의 제어 권한을 프레임워크에 넘김으로써 생산성을 향상시킨다.





## 서버 개발 과정



#### DTO (Data Transfer Object) / VO (Value Object) 구현

데이터 교환을 위해 사용할 객체를 만드는 과정

* 알고리즘 등의 로직은 구현하지 않고, 변수와 데이터를 저장하고 반환하는 메소드만 구현한다.



#### SQL 구현

데이터의 삽입, 변경, 삭제 등의 작업을 수행할 SQL문을 생성하는 과정

* 소스 코드 내에 직접 입력하거나, 별도의 XML 파일로 저장하여 관리한다.



#### DAO (Data Access Object) 구현

데이터베이스에 접근하고 SQL을 활용하여 데이터를 실제로 조작하는 코드를 구현하는 과정



#### Service 구현

사용자의 요청에 응답하기 위한 로직을 구현하는 과정



#### Controller 구현

사용자의 요청에 적절한 서비스를 호출하여, 그 결과를 사용자에게 반환하는 코드를 구현하는 과정이다.



> **각 구성 요소의 진행 과정**
>
> <img src="D:\GIT\EIP\실기\img\ServerDevelopeProcess.png" alt="ServerDevelopeProcess" style="zoom:40%;" />
>
> 1. 웹 사이트로부터 사용자의 요청이 Controller에 전달된다.
> 2. Controller는 해당 요청에 맞는 Service를 호출한다
> 3. Service는 수행을 위한 데이터를  DAO에 요청한다
> 4. ~ 6. DAO는 XML을 통해 Database로부터 Service가 요청한 데이터를 가져온다
>
> 7. 가져온 데이터를 Service에 반환한다.
> 8. Service의 수행 결과를 Controller에 반환한다.
> 9. Controller의 수행 결과를 웹 사이트에 반영한다.
>
> ※ DTO / VO 는 1, 5, 9 를 제외한 전 과정에서 요청과 응답 시 사용된다.





## 배치 프로그램

사용자와의 상호 작용 없이 여러 작업들을 미리 정해진 일련의 순서에 따라 일괄적으로 처리하는 것을 의미

* 정기 배치 : 일, 주, 월과 같이 정해진 기간에 정기적으로 수행된다.

* 이벤트성 배치 : 특정 조건을 설정해두고 조건이 충족될 떄만 수행된다.

* On-Demand 배치 : 사용자 요청시 수행된다.

* 배치 프로그램이 갖우처야 하는 필수요소

  + 대용량 데이터

    > 대량의 데이터를 가져오거나, 전달하거나, 계산하는 등의 처리가 가능해야 한다.

  + 자동화

    > 심각한 오류가 발생하는 상황을 제외하고는 사용자의 개입 없이 수행되어야 한다.

  + 견고성

    > 잘못된 데이터나 데이터 중복 등의 강황으로 중단되는 일 없이 수행되어야 한다.

  + 안정성 / 신뢰성

    > 오류가 발생하면 오류의 발생 위치, 시간 등을 추적할 수 있어야 한다.

  + 성능

    > 다른 응용 프로그램의 수행을 방해하지 않아야 하고, 지정된 시간 내에 처리가 완료되어야 한다.



#### 배치 스케줄러 (Batch Scheduler)

일괄 처리(Batch Processing) 작업이 설정된 주기에 맞춰 자동으로 수행되도록 지원해주는 도구

* 특정 업무를 원하는 시간에 처리할 수 있도록 지원한다는 특성 때문에 잡 스케줄러 (Job Scheduler)라고도 불린다.

* 스프링 배치 (Spring Batch)

  스프링 프레임워크의 특성을 그대로 가져와 스프링이 가지고 있는 다양한 기능들을 사용 가능

  스프링 배치의 주요 구성 요소와 역할

  + Job : 수행할 작업 정의
  + Job Launcher : 실행을 위한 인터페이스
  + Step : Job 처리를 위한 제어 정보
  + Job Repository : Step의 제어정보를 포함하여 작업 실행을 위한 모든 정보 저장

* Quartz

  스프링 프레임워크로 개발되는 응용 프로그램들의 일괄 처리를 위한 다양한 기능을 제공하는 오픈 소스 라이브러리

  Quartz 의 주요 구성요소와 역할

  + Scheduler : 실행 환경 관리
  + Job : 수행할 작업 정의
  + JobDetail : Job의 상세 정보
  + Trigger : Job의 실행 스케줄 정의

* Cron

  리눅스의 스케줄러 도구로 crontab 명령어를 통해 작업을 예약할 수 있다.







