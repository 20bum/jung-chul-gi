# 4장. 통합 구현



## 연계 요구사항 분석

통합구현은 사용자의 요구사항에 맞춰 송·수신 모듈과 중계 모듈간의 연계를 구현하는 것을 의미

* 일반적으로 통합구현은 **송·수신 시스템과 모듈, 중계시스템, 연계데이터, 네트워크**로 구성된다.



#### 송신 시스템과 모듈

송신시스템은 <u>데이터를 생성 및 변환하여 전송하는 시스템</u>으로, 송신 모듈과 모니터링 기능으로 구성



#### 수신 시스템과 모듈

수신 시스템은 <u>수신 받은 데이터를 정제 및 변환하는 시스템</u>으로, 수신 모듈과 모니터링 기능으로 구성된다.



#### 중계 시스템

내·외부 시스템 간 또는 내부 시스템 간의 연계 시 사용되는 아키텍처이다.



#### 연계 데이터

연계 데이터는 송·수신 시스템 간 송·수신 되는 데이터이다.



#### 네트워크

송신 시스템, 수신시스템, 중계시스템을 연결해주는 통신망이다.



#### 연계 요구사항 분석

통합 구현을 위해 사용자 요구사항을 분석하고 연계 데이터를 식별 및 표준화하여 연계 데이터를 정의하는 것이다.

###### 연계 요구사항 분석 절차

1. 시스템 구성도, 응용 애플리케이션 구성등을 통해 송·수신 시스템의 하드웨어 및 소프트웨어 구성, 네트워크 현황을 확인한다.
2. 송·수신 시스템과 연결할 데이터와 관련된 테이블 정의서, 코드 정의서등의 문서를 확인한다.
3. 확인된 시스템의 구성과 데이터 현황 정보 등을 기반으로 체크리스트를 작성한다.
4. 시스템 구성도, 응용 애플리케이션 구성, 테이블 정의서, 코드 정의서, 체크리스트 등을 사용자, 시스템  관리자 등과 공유하고 인터뷰나 설문조사를 실시한다.
5. 인터뷰나 설문조사를 통해 확인된 결과를 기반으로 요구사항의 ID, 이름, 유형, 설명, 해결방안 등이 포함된 요구사항 분석서(정의서)를 작성한다.





#### 연계 데이터 식별 및 표준화

연계 데이터를 구성하기 위해 연계 데이터를 식별하고 식별된 연계 데이터를 표준화한 후 이를 기반으로 연계(인터페이스) 정의서를 작성한다.

<img src="D:\GIT\EIP\실기\img\LinkedData.png" alt="LinkedData" style="zoom:40%;" />

* 연계 범위 및 항목 정의

  시스템 간 연계할 정보를 상세화하여 정의한다.

* 연계 코드 변환 및 매핑

  연계 정보 중 코드로 관리되어야 할 항목을 찾아 코드로 변환한다.

* 연계 데이터 식별자와 변경 구분 추가

  송신 시스템에서 송신한 데이터가 수신 시스템의 어떤 데이터에 해당되는지 확인하기 위해 수신 시스템의 연계 정보에 송신 시스템의 식별자를 추가한다.

* 연계 데이터 표현 방법 정의

  연계 데이터 구성

* 연계 정의서 및 명세서 작성





## 연계 매커니즘 정의

연계 매커니즘의 연계 방식에는 직접 연계 방식과 간접 연계 방식이 있다.

<img src="D:\GIT\EIP\실기\img\LinkedMechanism.png" alt="LinkedMechanism" style="zoom:40%;" />



#### 직접 연계 방식

중간 매개체 없이 송·수신 시스템이 직접 연계하는 방식

* 장점

  + 연계 및 통합 구현이 단순하고 용이하다.
  + 중간 매개체 없이 직접 연계되기 때문에 데이터 연계 처리 성능이 뛰어나다
  + 개발비용이 저렴하다
  + 개발 기간이 짧다

* 단점

  + 송·수신 시스템 간 결합도가 높아 시스템 변경 시 오류가 발생할 수 있다.
  + 보안을 위한 암호화, 복호화 처리와 비즈니스 로직을 적용하기 어렵다
  + 연계 및 통합이 가능한 시스템 환경이 제한적이다.

* 종류

  DB Link, API/Open API, DB Connection, JDBC



#### 간접 연계 방식

송·수신 시스템 사이에 중간 매개체를 두어 연계하는 방식

* 장점

  + 서로 다른 네트워크, 프로토콜 등 다양한 환경의 연계 및 통합이 가능하다
  + 송·수신 시스템 간 인터페이스가 변경되어도 오류 없이 서비스가 가능하다.
  + 로직을 쉽게 반영할 수 있다.

* 단점

  + 연계 매커니즘과 아키텍처가 복잡하다
  + 중간 매개체로 인해 성능이 저하될 수 있다
  + 개발 및 적용 기간이 비교적 길다

* 종류

  + 연계 솔루션 : EAI 서버와 송·수신 시스템에 설치되는 클라이언트를 이용하는 방식

    > **EAI (Enterprise Application Integration)**
    >
    > 송·수신 데이터를 식별하기 위해 송·수신 처리 및 진행 현황을 모니터링하고 통제하는 시스템

  + ESB Enterprise Service Bus) : 애플리케이션 간 연계, 데이터 변환, 웹서비스 지원 등 표준 기반의 인터페이스를 제공하는 방식

  + Socket : 서버는 통신을 위한 소켓을 생성하여 포트를 할당하고 클라이언트의 통신 요청 시 클라이언트와 연결하여 통신하는 네트워크 기술

  + Web Service : WSDL과 UDDI, SOAP 프로토콜을 이용하여 연계하는 방식

    > **WSDL (Web Services Description Language)**
    >
    > 웹 서비스와 관련된 서식이나 프롵토콜 등을 표준적인 방법으로 기술하고 게시하기 위한 언어
    >
    > **UDDI (Universal Description Discovery and Integration)**
    >
    > 인터넷에서 전 세계의 비즈니스 업체 목록에 자신의 목록을 등록하기 위한 확장성 생성 언어 
    >
    > **SOAP (Simple Object Access Protocol)**
    >
    > 웹 서비스를 실제로 이용하기 위한 객체 간의 통신 규약



#### 연계 매커니즘의 구성

* 연계 데이터 생성 및 추출

  응용 프로그램이나 DB등 응용 시스템에서 연계 데이터를 생성하고 추출하는 것

* 코드 매핑 및 데이터 변환

  송신 시스템에서 사용하는 코드를 수신 시스템에서 사용하는 코드로 매핑 및 변환하는 것

* 인터페이스 테이블 또는 파일 생성

  연계 데이터를 인터페이스 테이블이나 파일 형식으로 생성하는 것

* 로그 기록

  송·수신 시스템에서 수행되는 모든 과정에 대한 결과 및 오류에 대한 정보를 로그테이블이나 파일에 기록하는 것

* 연계 서버 또는 송·수신 어댑터

  인터페이스 테이블 또는 파일의 데이터를 전송 형식에 맞게 변환하고 송·수신을 수행하는 등 관련된 모든 처리를 수행한다.

* 전송

  송신 시스템에서 생성된 연계 데이터를 네트워크 환경에 맞는 데이터로 변환한 후 수신 시스템으로 보내는 것

* 운영 DB에 연계 데이터 반영

  수신된 인터페이스 테이블 또는 파일 구조의 데이터를 변환 프로그램을 이용하여 수신 시스템의 운영 DB에 반영하는것





## 연계 장애 및 오류처리 구현

연계 매커니즘에서 오류 발생 시점, 오류 로그 기록 장소, 오류 로그 기록 주체는 크게 송·수신 시스템, 연계 서버 구간으로 구분된다.

| 구간        | 오류 발생 시점                                               |
| ----------- | ------------------------------------------------------------ |
| 송신 시스템 | - 데이터 생성 및 추출 시<br />- 코드 매핑 및 데이터 변환 시<br />- 인터페이스 테이블 또는 파일 등록 시 |
| 수신 시스템 | - 연계 데이터 로드 시<br />- 코드 매핑 및 데이터 변환 시<br />- 운영 DB에 반영 시 |
| 연계 서버   | - 연계 데이터 로드 및 전송 형식으로 변환 시<br />- 연계 데이터 송·수신 시<br />- 수신 시스템의 데이터 형식으로 변환 및 로드 시 |



#### 장애 및 오류 유형과 처리 방안

* 장애 및 오류의 유형은 송·수신 시스템의 <u>**연계 프로그램 오류, 연계 서버의 오류, 연계 데이터의 오류**</u>로 분류할 수 있다.
* 장애 및 오류에 대해서는 송·수신 시스템의 연계 프로그램과 연계 서버에서 기록하는 로그를 통해 장애 및 오류 원인을 확인하고 분석하여 적절한 처리 방안을 선택



#### 장애 및 오류의 정의와 설계

* 장애 및 오류 관리 대상
* 관리 대상의 장애 및 오류 코드와 메시지
* 장애 및 오류 코드와 메시지 관리 방식
* 장애 및 오류 기록 방식





## 연계 데이터 보안 적용

송신 시스템에서 수신 시스템으로 전송되는 연계 데이터는 보안에 취약할 수 있으므로 데이터의 중요성을 고려하여 보안을 적용해야 한다.

* 일반적으로 연계 데이터의 보안은 **전송 구간에서의 암·복호화**와 **데이터의 암·복호화**로 구현

  #### 전송 구간 보안

  > 전송되는 데이터나 패킷을 쉽게 가로챌 수 없도록 암호화 기능이 포함된 프로토콜을 사용하거나 데이터나 패킷을 가로채더라도 내용을 확인할 수 없게 데이터나 패킷을 암호화 한다.
  >
  > + 전송 구간 암호화를 지원하는 VPN이나 연계 솔루션을 적용해 전송 구간 암호화를 수행한다.

  #### 데이터 보안

  > 송신 시스템에서 연계 데이터를 추출할 때와 수신 시스템에서 데이터를 운영 DB에 반영할 때 데이터를 암·복호화 하는 것이다.



#### 암·복호화 적용 대상 선정

데이터의 중요도에 따라 선정한다.



#### 암호화 알고리즘

암호화 알고리즘은 해시(Hash)를 사용하는 단방향 암호화 방식과 개인키 및 공개키로 분류되는 양방향 암호화 방식이 있으며, 송·수신 시스템 연계 시 일반적으로 양방향 암호화 방식을 사용한다.

> **해시(Hash)**
>
> 임의의 길이의 입력 데이터나 메시지를 고정된 길이의 값이나 키로 변환하는 것

> **개인키 암호화 (Private Key Encryption) 기법**
>
> 동일한 키로 데이터를 암호화하고 복호화하는 기법

> **공개키 암호화 (Public Key Encryption) 기법**
>
> 서로 다른 키로 데이터를 암호화하고 복호화 하는 기법





## 연계 모듈의 구현 환경

연계 매커니즘에 따라 구현된 연계 시스템 환경 및 모듈 구현 환경을 의미



#### EAI (Enterprise Application Integration)

기업 내 각종 애플리케이션 및 플랫폼 간의 정보 전달, 연계, 통합 등 상호 연동이 가능하게 해주는 솔루션

* EAI의 구축 유형

  | 유형                        | 기능                                                         |
  | --------------------------- | ------------------------------------------------------------ |
  | Point-to-Point              | - 가장 기본적인 애플리케이션 통합방식으로, 애플리케이션을 1:1로 연결<br />- 변경 및 재사용이 어렵다 |
  | Hub & Spoke                 | - 단일 접점인 허브 시스템을 통해 데이터를 전송하는 중앙 집중형 방식<br />- 확장 및 유지보수가 용이<br />- 허브 장애 발생 시 시스템 전체 영향을 미친다 |
  | Message Bus<br />(ESB 방식) | - 애플리케이션 사이에 미들웨어를 두어 처리하는 방식<br />- 확장성이 뛰어나며 대용량 처리가 가능 |
  | Hybrid                      | - Hub & Spoke와 Message Bus의 혼합 방식<br />- 그룹 내에서는 Hub & Spoke 방식을, 그룹 간에는 Message Bus 방식을 사용<br />- 데이터 병목 현상을 최소화 할 수 있다. |



#### ESB (Enterprise Service Bus)

애플리케이션 간 연계, 데이터 변환, 웹 서비스 지원 등 표준 기반의 인터페이스를 제공하는 솔루션

* 애플리케이션 통합 측면에서 EAI와 유사하지만 애플리케이션 보다는 서비스 중심의 통합을 지향



#### 웹 서비스 (Web Service)

네트워크의 정보를 표준화된 서비스 형태로 만들어 공유하는 기술, 서비스 지향 아키텍처(SOA) 개념을 실현하는 대표적인 기술

> **서비스 지향 아키텍처 (SOA; Service Oriented Architecture)**
>
> 기업의 소프트웨어 인프라인 정보시스템을 공유와 재사용이 가능한 서비스 단위나 컴포넌트 중심으로 구축하는 정보 기술 아키텍처를 말한다.

* 웹 서비스의 구성
  + SOAP (Simple Object Access Protocol) : HTTP, HTTPS, SMTP등을 활용하여 XML 기반의 메시지를 네트워크 상에서 교환하는 프로토콜
  + UDDI (Universal Description, Discovery and Integration) : WSDL을 등록하여 서비스와 서비스 제공자를 검색하고 접근하는데 사용
  + WSDL (Web Services Description Language) : 웹 서비스명, 서비스 제공위치, 프로토콜 등 웹 서비스에 대한 상세 정보를 XML 형식으로 구현한다.





## XML (eXtensible Markup Language)

웹 브라우저 간 HTML문법이 호환되지 않는 문제와 SGML의 복잡함을 해결하기 위하여 개발된 다목적 마크업 언어이다.



## 연계 테스트

구축된 연계 시스템과 연계 시스템의 구성 요소가 정상적으로 동작하는 확인하는 활동

* 연계 테스트 케이스 작성, 연계 테스트 환경구축, 연계 테스트 수행, 연계 테스트 수행 결과 검증 순으로 진행



#### 연계 테스트 케이스 작성

연계 시스템 간의 데이터 및 프로세스의 흐름은ㄹ 분석하여 필요한 테스트 항목을 도출하는 과정



#### 연계 테스트 환경 구축

테스트의 일정, 방법, 절차, 소요 시간 등을 송·수신 기관과의 협의를 통해 결정하는 것



#### 연계 테스트 수행

연계 응용 프로그램을 실행하여 연계 테스트 케이스의 시험 항목 및 처리 절차등을 실제로 진행하는 것



#### 연계 테스트 수행 결과 검증

연계 테스트 케이스의 시험 항목 및 처리 절차를 수행한 결과가 예상 결과와 동일한지를 확인하는 것

